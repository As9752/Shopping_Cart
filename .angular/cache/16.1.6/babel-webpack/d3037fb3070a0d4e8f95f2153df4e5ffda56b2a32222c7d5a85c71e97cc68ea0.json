{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ProductService {\n  getFromStorage() {\n    const productsFromStorage = sessionStorage.getItem('products');\n    if (productsFromStorage) {\n      this.products = JSON.parse(productsFromStorage);\n    }\n    return this.products;\n  }\n  setToStorage() {\n    sessionStorage.setItem('products', JSON.stringify(this.products));\n  }\n  getProducts() {\n    return this.products;\n  }\n  // addProduct(product: Product): void {\n  //   this.products.push(product);\n  //   this.setToStorage();\n  // }\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = 'http://localhost:8034/hotel-api/v1/getall';\n    this.counter = 1;\n    this.products = [];\n    this.productsList = [];\n    this.productsSubject$ = new BehaviorSubject(this.getFromStorage());\n    this.products$ = this.productsSubject$.asObservable();\n  }\n  getApiData() {\n    return this.http.get(this.apiUrl);\n  }\n  addProduct(product) {\n    return this.http.post('http://localhost:8034/hotel-api/v1/hotels', product);\n  }\n  getAllProducts() {\n    return this.getFromStorage();\n  }\n  getProduct(id) {\n    return this.http.get(`http://localhost:8034/hotel-api/v1/getall/${id}`);\n  }\n  getAllFromAPI() {\n    return this.http.get('http://localhost:8034/hotel-api/v1/getall');\n  }\n}\nProductService.ɵfac = function ProductService_Factory(t) {\n  return new (t || ProductService)(i0.ɵɵinject(i1.HttpClient));\n};\nProductService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProductService,\n  factory: ProductService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["BehaviorSubject","ProductService","getFromStorage","productsFromStorage","sessionStorage","getItem","products","JSON","parse","setToStorage","setItem","stringify","getProducts","constructor","http","apiUrl","counter","productsList","productsSubject$","products$","asObservable","getApiData","get","addProduct","product","post","getAllProducts","getProduct","id","getAllFromAPI","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/Users/ashishkloudspot/Downloads/Shopping_Cart/src/app/product/product.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {Product } from '../model/product';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductService {\n\n  private apiUrl = 'http://localhost:8034/hotel-api/v1/getall';\n\n  private counter = 1;\n  private products: Product[] = [];\n\n  private productsList: Product[] = [];\n  private productsSubject$: BehaviorSubject<Product[]> = new BehaviorSubject(this.getFromStorage());\n  products$ = this.productsSubject$.asObservable()\n\n  getFromStorage(){\n    const productsFromStorage = sessionStorage.getItem('products');\n    if(productsFromStorage){\n      this.products = JSON.parse(productsFromStorage);      \n    }\n    return this.products\n  }\n\n  setToStorage(){\n    sessionStorage.setItem('products', JSON.stringify(this.products));\n  }\n  \n \n\n  \n\n  getProducts() {\n    return this.products;\n  }\n\n  // addProduct(product: Product): void {\n  //   this.products.push(product);\n  //   this.setToStorage();\n  // }\n\n  constructor(private http: HttpClient) {}\n\n  getApiData() {\n    return this.http.get<Product[]>(this.apiUrl);\n  }\n\n  addProduct(product: Omit<Product, 'id'>) {\n\n    return this.http.post('http://localhost:8034/hotel-api/v1/hotels', product)\n\n  }\n\n \n\n  getAllProducts() {\n\n    return this.getFromStorage()\n\n  }\n\n \n\n  getProduct(id: string) {\n\n    return this.http.get<Product>(`http://localhost:8034/hotel-api/v1/getall/${id}`)\n\n  }\n\n \n\n  getAllFromAPI() {\n\n    return this.http.get<Product[]>('http://localhost:8034/hotel-api/v1/getall')\n\n  }\n}"],"mappings":"AAEA,SAASA,eAAe,QAAoB,MAAM;;;AAMlD,OAAM,MAAOC,cAAc;EAWzBC,cAAcA,CAAA;IACZ,MAAMC,mBAAmB,GAAGC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;IAC9D,IAAGF,mBAAmB,EAAC;MACrB,IAAI,CAACG,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACL,mBAAmB,CAAC;;IAEjD,OAAO,IAAI,CAACG,QAAQ;EACtB;EAEAG,YAAYA,CAAA;IACVL,cAAc,CAACM,OAAO,CAAC,UAAU,EAAEH,IAAI,CAACI,SAAS,CAAC,IAAI,CAACL,QAAQ,CAAC,CAAC;EACnE;EAMAM,WAAWA,CAAA;IACT,OAAO,IAAI,CAACN,QAAQ;EACtB;EAEA;EACA;EACA;EACA;EAEAO,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAlChB,KAAAC,MAAM,GAAG,2CAA2C;IAEpD,KAAAC,OAAO,GAAG,CAAC;IACX,KAAAV,QAAQ,GAAc,EAAE;IAExB,KAAAW,YAAY,GAAc,EAAE;IAC5B,KAAAC,gBAAgB,GAA+B,IAAIlB,eAAe,CAAC,IAAI,CAACE,cAAc,EAAE,CAAC;IACjG,KAAAiB,SAAS,GAAG,IAAI,CAACD,gBAAgB,CAACE,YAAY,EAAE;EA2BT;EAEvCC,UAAUA,CAAA;IACR,OAAO,IAAI,CAACP,IAAI,CAACQ,GAAG,CAAY,IAAI,CAACP,MAAM,CAAC;EAC9C;EAEAQ,UAAUA,CAACC,OAA4B;IAErC,OAAO,IAAI,CAACV,IAAI,CAACW,IAAI,CAAC,2CAA2C,EAAED,OAAO,CAAC;EAE7E;EAIAE,cAAcA,CAAA;IAEZ,OAAO,IAAI,CAACxB,cAAc,EAAE;EAE9B;EAIAyB,UAAUA,CAACC,EAAU;IAEnB,OAAO,IAAI,CAACd,IAAI,CAACQ,GAAG,CAAU,6CAA6CM,EAAE,EAAE,CAAC;EAElF;EAIAC,aAAaA,CAAA;IAEX,OAAO,IAAI,CAACf,IAAI,CAACQ,GAAG,CAAY,2CAA2C,CAAC;EAE9E;;AAtEWrB,cAAc,C;mBAAdA,cAAc,EAAA6B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAdhC,cAAc,C;SAAdA,cAAc;EAAAiC,OAAA,EAAdjC,cAAc,CAAAkC,IAAA;EAAAC,UAAA,EAFb;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}